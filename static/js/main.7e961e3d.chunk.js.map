{"version":3,"sources":["webgl/initShaderProgram.ts","webgl/actions.ts","webgl/draw.ts","webgl/setupVertices.ts","Renderer.tsx","shaders/mandelbrot/vertexShader.ts","shaders/mandelbrot/fragmentShader.ts","Settings.tsx","serviceWorker.ts","webgl/store.ts","index.tsx"],"names":["initShaderProgram","gl","vertexShaderSource","fragmentShaderSource","vertexShader","loadShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","validateProgram","VALIDATE_STATUS","console","error","getProgramInfoLog","type","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","xLength","state","Math","abs","boundaries","yLength","centerZoom","direction","manualZoom","window","innerWidth","innerHeight","x","y","zoomFactor","xw","width","yw","height","draw","vertexAttribPointer","FLOAT","Float32Array","BYTES_PER_ELEMENT","enableVertexAttribArray","uniform1f","getUniformLocation","iterations","radius","uniform1i","mode","smooth","interpolation","samplingRate","uniform4fv","drawArrays","TRIANGLE_FAN","setupVertices","useProgram","verticesBufferObject","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","Renderer","store","this","props","canvas","document","getElementById","getState","getContext","preserveDrawingBuffer","alert","listen","addEventListener","viewport","updateState","resize","onwheel","event","preventDefault","clientX","offsetLeft","clientY","offsetTop","deltaY","zoom","dragger","previousPosition","startDrag","endDrag","move","position","dx","dy","isDragging","dragging","onmousedown","onmouseup","onmousemove","animateIteration","times","requestAnimationFrame","animateZoom","limit","animateRadius","filename","image","toDataURL","replace","anchor","createElement","setAttribute","click","download","reduce","string","boundary","index","toString","length","id","React","Component","Settings","isOpen","body","onkeyup","keyCode","setState","renderer","activeMode","modes","size","onClose","hasBackdrop","className","style","flex","display","flexDirection","justifyContent","alignItems","padding","marginTop","marginBottom","flexWrap","map","flexBasis","key","fill","minorStepSize","stepSize","majorStepSize","value","parseFloat","toPrecision","onValueChange","newBoundaries","disabled","onChange","currentTarget","checked","icon","onClick","current","large","downloadImage","useState","useEffect","Boolean","location","hostname","match","createStore","initialState","offset","listeners","fire","listener","newState","push","App","useRef","Fragment","ref","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.7e961e3d.chunk.js","sourcesContent":["function initShaderProgram(\n  gl: WebGLRenderingContext,\n  vertexShaderSource: string,\n  fragmentShaderSource: string\n): WebGLProgram | null {\n  const vertexShader = loadShader(gl, gl.VERTEX_SHADER, vertexShaderSource);\n  const fragmentShader = loadShader(\n    gl,\n    gl.FRAGMENT_SHADER,\n    fragmentShaderSource\n  );\n  const shaderProgram = gl.createProgram();\n  if (\n    shaderProgram !== null &&\n    vertexShader !== null &&\n    fragmentShader !== null\n  ) {\n    gl.attachShader(shaderProgram, vertexShader);\n    gl.attachShader(shaderProgram, fragmentShader);\n    gl.linkProgram(shaderProgram);\n    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n      console.error(\n        \"Error linking the program: \" + gl.getProgramInfoLog(shaderProgram)\n      );\n      return null;\n    }\n\n    gl.validateProgram(shaderProgram);\n    if (!gl.getProgramParameter(shaderProgram, gl.VALIDATE_STATUS)) {\n      console.error(\n        \"Error validating the program: \" + gl.getProgramInfoLog(shaderProgram)\n      );\n      return null;\n    }\n    return shaderProgram;\n  }\n  return null;\n\n  function loadShader(\n    gl: WebGLRenderingContext,\n    type: number,\n    source: string\n  ): WebGLShader | null {\n    const shader = gl.createShader(type);\n    if (shader !== null) {\n      gl.shaderSource(shader, source);\n      gl.compileShader(shader);\n\n      if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        console.error(\n          \"Error compiling the shader: \" + gl.getShaderInfoLog(shader)\n        );\n        gl.deleteShader(shader);\n        return null;\n      }\n      return shader;\n    }\n    return null;\n  }\n}\n\nexport default initShaderProgram;\n","export function xLength(state: any) {\n  return Math.abs(state.boundaries[0] - state.boundaries[1]);\n}\n\nexport function yLength(state: any) {\n  return Math.abs(state.boundaries[2] - state.boundaries[3]);\n}\n\nexport function resize(state: any) {\n  let width = window.innerWidth - state.width;\n  let height = window.innerHeight - state.height;\n\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight,\n    boundaries: [\n      state.boundaries[0] - ((width / 2) * xLength(state)) / state.width,\n      state.boundaries[1] + ((width / 2) * xLength(state)) / state.width,\n      state.boundaries[2] - ((height / 2) * yLength(state)) / state.height,\n      state.boundaries[3] + ((height / 2) * yLength(state)) / state.height,\n    ],\n  };\n}\n\nexport function centerZoom(state: any, direction: number) {\n  return manualZoom(\n    state,\n    window.innerWidth / 2,\n    window.innerHeight / 2,\n    direction\n  );\n}\n\nexport function manualZoom(\n  state: any,\n  x: number,\n  y: number,\n  direction: number\n) {\n  const zoomFactor = direction < 0 ? 0.05 : -0.05;\n  const xw = x / state.width;\n  const yw = y / state.height;\n  return {\n    boundaries: [\n      state.boundaries[0] + xw * xLength(state) * zoomFactor,\n      state.boundaries[1] - (1 - xw) * xLength(state) * zoomFactor,\n      state.boundaries[2] + (1 - yw) * yLength(state) * zoomFactor,\n      state.boundaries[3] - yw * yLength(state) * zoomFactor,\n    ],\n  };\n}\n\nexport function zoom(\n  state: any,\n  event: MouseWheelEvent,\n  canvas: HTMLCanvasElement\n) {\n  event.preventDefault();\n\n  if (\n    event.clientX > canvas.offsetLeft &&\n    event.clientX < canvas.offsetLeft + state.width &&\n    event.clientY > canvas.offsetTop &&\n    event.clientY < canvas.offsetTop + state.height\n  ) {\n    return manualZoom(\n      state,\n      event.clientX - canvas.offsetLeft,\n      event.clientY - canvas.offsetTop,\n      event.deltaY\n    );\n  }\n}\n\nexport function dragging() {\n  const DRAGGING = 0;\n  const NO_DRAGGING = 1;\n\n  const dragger = {\n    mode: NO_DRAGGING,\n    previousPosition: [0, 0],\n  };\n\n  function startDrag(event: MouseEvent) {\n    dragger.mode = DRAGGING;\n    dragger.previousPosition = [event.clientX, event.clientY];\n  }\n\n  function endDrag(event: MouseEvent) {\n    dragger.mode = NO_DRAGGING;\n    dragger.previousPosition = [event.clientX, event.clientY];\n  }\n  function move(state: any, event: MouseEvent) {\n    if (dragger.mode === DRAGGING) {\n      const position = [event.clientX, event.clientY];\n\n      const dx =\n        ((dragger.previousPosition[0] - position[0]) * xLength(state)) /\n        state.width;\n      const dy =\n        ((dragger.previousPosition[1] - position[1]) * yLength(state)) /\n        state.height;\n\n      dragger.previousPosition = position;\n      return {\n        boundaries: [\n          state.boundaries[0] + dx,\n          state.boundaries[1] + dx,\n          state.boundaries[2] - dy,\n          state.boundaries[3] - dy,\n        ],\n      };\n    }\n  }\n\n  return {\n    startDrag,\n    endDrag,\n    move,\n    isDragging: () => dragger.mode === DRAGGING,\n  };\n}\n\nexport function download(canvas: HTMLCanvasElement, filename: string) {\n  const image = canvas\n    .toDataURL(\"image/png\")\n    .replace(\"image/png\", \"image/octet-stream\");\n\n  const anchor = document.createElement(\"a\");\n  anchor.setAttribute(\"download\", filename);\n  anchor.setAttribute(\"href\", image);\n  anchor.click();\n}\n","function draw(\n  gl: WebGLRenderingContext,\n  shaderProgram: WebGLProgram,\n  state: any\n) {\n  gl.vertexAttribPointer(\n    0,\n    3,\n    gl.FLOAT,\n    false,\n    3 * Float32Array.BYTES_PER_ELEMENT,\n    0\n  );\n  gl.enableVertexAttribArray(0);\n  gl.uniform1f(\n    gl.getUniformLocation(shaderProgram, \"iterations\"),\n    state.iterations\n  );\n  gl.uniform1f(gl.getUniformLocation(shaderProgram, \"radius\"), state.radius);\n  gl.uniform1i(gl.getUniformLocation(shaderProgram, \"mode\"), state.mode);\n  gl.uniform1i(gl.getUniformLocation(shaderProgram, \"smooth\"), state.smooth);\n  gl.uniform1i(\n    gl.getUniformLocation(shaderProgram, \"interpolation\"),\n    state.interpolation\n  );\n  gl.uniform1i(\n    gl.getUniformLocation(shaderProgram, \"samplingRate\"),\n    state.samplingRate\n  );\n  gl.uniform1f(gl.getUniformLocation(shaderProgram, \"width\"), state.width);\n  gl.uniform1f(gl.getUniformLocation(shaderProgram, \"height\"), state.height);\n\n  gl.uniform4fv(\n    gl.getUniformLocation(shaderProgram, \"boundaries\"),\n    state.boundaries\n  );\n  gl.drawArrays(gl.TRIANGLE_FAN, 0, 4);\n}\n\nexport default draw;\n","function setupVertices(gl: WebGLRenderingContext, shaderProgram: WebGLProgram) {\n  gl.useProgram(shaderProgram);\n  const vertices = [\n    -1.0,\n    -1.0,\n    0.0,\n    1.0,\n    -1.0,\n    0.0,\n    1.0,\n    1.0,\n    0.0,\n    -1.0,\n    1.0,\n    0.0,\n  ];\n  const verticesBufferObject = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, verticesBufferObject);\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n}\n\nexport default setupVertices;\n","import React from \"react\";\nimport initShaderProgram from \"./webgl/initShaderProgram\";\nimport { zoom, dragging, resize, centerZoom, download } from \"./webgl/actions\";\nimport draw from \"./webgl/draw\";\nimport setupVertices from \"./webgl/setupVertices\";\nimport vertexShader from \"./shaders/mandelbrot/vertexShader\";\nimport fragmentShader from \"./shaders/mandelbrot/fragmentShader\";\n\ntype RendererProps = {\n  store: any;\n};\n\nclass Renderer extends React.Component<RendererProps> {\n  gl: any;\n\n  componentDidMount() {\n    const store = this.props.store;\n\n    const canvas = document.getElementById(\"webgl\") as HTMLCanvasElement;\n    if (canvas !== null) {\n      canvas.width = store.getState().width;\n      canvas.height = store.getState().height;\n      let gl = canvas.getContext(\"webgl\", {\n        preserveDrawingBuffer: true,\n      }) as WebGLRenderingContext;\n      if (!gl)\n        gl = canvas.getContext(\"experimental-webgl\", {\n          preserveDrawingBuffer: true,\n        }) as WebGLRenderingContext;\n      if (!gl) alert(\"Your browser does not support WebGL.\");\n\n      const shaderProgram = initShaderProgram(gl, vertexShader, fragmentShader);\n      if (shaderProgram !== null) {\n        setupVertices(gl, shaderProgram);\n\n        store.listen(() => {\n          gl.useProgram(shaderProgram);\n          draw(gl, shaderProgram, store.getState());\n        });\n\n        window.addEventListener(\"resize\", () => {\n          canvas.width = window.innerWidth;\n          canvas.height = window.innerHeight;\n          gl.viewport(0, 0, canvas.width, canvas.height);\n          store.updateState(resize(store.getState()));\n        });\n\n        canvas.onwheel = (event) => {\n          store.updateState(zoom(store.getState(), event, canvas));\n        };\n\n        const dragger = dragging();\n        canvas.onmousedown = (event) => {\n          dragger.startDrag(event);\n        };\n\n        canvas.onmouseup = (event) => {\n          dragger.endDrag(event);\n        };\n\n        canvas.onmousemove = (event) => {\n          if (dragger.isDragging()) {\n            store.updateState(dragger.move(store.getState(), event));\n          }\n        };\n\n        this.animateIteration();\n      }\n    }\n    //this.animateZoom();\n  }\n\n  animateZoom(direction = -1, times = 0) {\n    const { store } = this.props;\n    if (times < 50) {\n      store.updateState(centerZoom(store.getState(), direction));\n      requestAnimationFrame(() => this.animateZoom(direction, times + 1));\n    }\n  }\n\n  animateIteration(limit = 100) {\n    const { store } = this.props;\n    const { iterations } = store.getState();\n    if (iterations < limit) {\n      store.updateState({ iterations: iterations + 1 });\n      requestAnimationFrame(() => this.animateIteration(limit));\n    }\n  }\n\n  animateRadius(limit = 2) {\n    const { store } = this.props;\n    const { radius } = store.getState();\n    if (radius < limit) {\n      store.updateState({ radius: radius + 0.01 });\n      requestAnimationFrame(() => this.animateRadius(limit));\n    }\n  }\n\n  downloadImage() {\n    const { store } = this.props;\n    const { iterations, samplingRate, radius, boundaries } = store.getState();\n    const canvas = document.getElementById(\"webgl\") as HTMLCanvasElement;\n    const filename =\n      \"mandelbrot_\" +\n      iterations +\n      \"_\" +\n      samplingRate +\n      \"_\" +\n      radius +\n      \"_\" +\n      boundaries.reduce(\n        (string: string, boundary: number, index: number) =>\n          string +\n          boundary.toString() +\n          (index + 1 !== boundaries.length ? \"_\" : \"\"),\n        \"\"\n      ) +\n      \".png\";\n    download(canvas, filename);\n  }\n\n  render() {\n    return <canvas id=\"webgl\"></canvas>;\n  }\n}\n\nexport default Renderer;\n","export default `\nprecision highp float;\nattribute vec2 vPosition;\nvoid main(void)\n{\n\tgl_Position = vec4(vPosition, 0.0, 1.0);\n}\n`;\n","export default `\nprecision highp int;\nprecision highp float;\n\nconst int MAX_ITER = 65535;\nconst int MAX_SAMPLING_RATE = 4096;\nuniform float iterations;\nuniform int samplingRate;\nuniform float width;\nuniform float height;\nuniform vec4 boundaries;\nuniform float radius;\nuniform int mode;\nuniform int smooth;\nuniform int interpolation;\n\nvarying float totalIterations;\n\nvec2 complexMultiplication(vec2 z1, vec2 z2)\n{\n\treturn vec2(z1.x * z2.x - z1.y * z2.y, z1.x * z2.y + z1.y * z2.x);\n}\n\n// https://github.com/hughsk/glsl-hsv2rgb/blob/master/index.glsl\nvec3 hsv2rgb(vec3 c) {\n  vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat mandelbrot(vec2 c)\n{\n\tvec2 z = vec2(0, 0);\n\tfloat n = 0.0;\n\tfor (int i = 0; i < MAX_ITER; i++) {\n\t\tif (length(z) > radius) {\n\t\t\tbreak;\n\t\t}\n\t\tif (n > iterations) {\n\t\t\tbreak;\n\t\t}\n\t\tz = complexMultiplication(z, z) + c;\n\t\tn++;\n\t}\n\treturn float(n);\n}\n\nfloat optimizedMandelbrot(vec2 c)\n{\n\tfloat n = 0.0;\n\tfloat x2 = 0.0;\n\tfloat y2 = 0.0;\n\tfloat x = 0.0;\n\tfloat y = 0.0;\n\tfloat bound = radius * radius;\n\tfor (int i = 0; i < MAX_ITER; i++) {\n\t\tif (x2 + y2 > bound) {\n\t\t\tbreak;\n\t\t}\n\t\tif (n > iterations) {\n\t\t\tbreak;\n\t\t}\n\n\t\ty = 2.0 * x * y + c.y;\n\t\tx = x2 - y2 + c.x;\n\t\tx2 = x * x;\n\t\ty2 = y * y;\n\n\t\tn++;\n\t}\n\n\treturn float(n);\n}\n\nfloat smoothMandelbrot(vec2 c)\n{\n\tfloat n = 0.0;\n\tfloat x2 = 0.0;\n\tfloat y2 = 0.0;\n\tfloat x = 0.0;\n\tfloat y = 0.0;\n\tfor (int i = 0; i < MAX_ITER; i++) {\n\t\tif (x * x + y * y > pow(2.0, 8.0)) {\n\t\t\tbreak;\n\t\t}\n\t\tif (n > iterations) {\n\t\t\tbreak;\n\t\t}\n\n\t\ty = 2.0 * x * y + c.y;\n\t\tx = x2 - y2 + c.x;\n\t\tx2 = x * x;\n\t\ty2 = y * y;\n\n\t\tn++;\n\t}\n\n\tif (n < iterations) {\n\t\treturn float(n) + 1.0 - log((log(x * x + y * y) / 2.0) / log(2.0)) / log(2.0);\n\t}\n\n\treturn float(n);\n}\n\nfloat sampling (float x, float y) {\n\tvec2 c = vec2(boundaries.x + x * (boundaries.y - boundaries.x) / (width), boundaries.z + y * (boundaries.w - boundaries.z) / (height));\n\n\tif (smooth == 1) {\n\t\treturn smoothMandelbrot(c);\n\t}\n\treturn optimizedMandelbrot(c);\n}\n\nfloat superSampling(float x, float y) {\n\tfloat change = 1.0 / (float(samplingRate) + 1.0);\n\tfloat m = 0.0;\n\tfor (int i = 1; i < MAX_SAMPLING_RATE + 1; i++) {\n\t\tif (i > samplingRate) {\n\t\t\tbreak;\n\t\t}\n\t\tfor (int j = 1; j < MAX_SAMPLING_RATE + 1; j++) {\n\t\t\tif (j > samplingRate) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tm = m + sampling(x + float(i) * change, y + float(j) * change);\n\t\t}\n\t}\n\treturn m / float(samplingRate * samplingRate);\n}\n\nvec3 bwRender(float m) {\n\tint color = m < iterations ? 1 : 0;\n\treturn vec3(color, color, color);\n}\n\nvec3 greyRender(float m) {\n\tfloat color = 1.0 - float(m) / float(iterations);\n\treturn vec3(color, color, color);\n}\n\nvec3 colorRender(float m) {\n\tfloat hue = m / iterations;\n\tfloat saturation = 1.0;\n\tfloat value = m < iterations ? 1.0 : 0.0;\n\treturn hsv2rgb(vec3(hue, saturation, value));\n}\n\nvoid main(void)\n{\n\n\tfloat x = gl_FragCoord.x - 0.5;\n\tfloat y = gl_FragCoord.y - 0.5;\n\n\tfloat m = superSampling(x, y);\n\n\tif (interpolation == 1){\n\t\tm = float(int(m));\n\t}\n\n\tvec3 color1;\n\tvec3 color2;\n\n\tif (mode == 0) {\n\t\tcolor1 = colorRender(m);\n\t\tcolor2 = colorRender(m + 1.0);\n\t}\n\n\tif (mode == 1) {\n\t\tcolor1 = greyRender(m);\n\t\tcolor2 = greyRender(m + 1.0);\n\t}\n\n\tif (mode == 2) {\n\t\tcolor1 = bwRender(m);\n\t\tcolor2 = bwRender(m + 1.0);\n\t}\n\n\tvec3 color = color1;\n\tif (interpolation == 1){\n\t\tcolor = mix(color1, color2, m); \n\t}\n\n\tgl_FragColor = vec4(color, 1.0);\n}\n`;\n","import React, { useEffect, useState } from \"react\";\nimport {\n  Drawer,\n  NumericInput,\n  Label,\n  Button,\n  Checkbox,\n} from \"@blueprintjs/core\";\nimport { centerZoom } from \"./webgl/actions\";\n\ntype SettingsProps = {\n  store: any;\n  iterations: number;\n  samplingRate: number;\n  renderer: any;\n  activeMode: number;\n  smooth: boolean;\n  interpolation: boolean;\n  radius: number;\n  modes: Array<string>;\n  boundaries: Array<number>;\n};\n\nclass Settings extends React.Component<SettingsProps> {\n  state = {\n    isOpen: false,\n  };\n\n  componentDidMount() {\n    document.body.onkeyup = (event) => {\n      if (event.keyCode === 32) {\n        this.setState({ isOpen: !this.state.isOpen });\n      }\n    };\n  }\n\n  render() {\n    const { isOpen } = this.state;\n    const {\n      store,\n      iterations,\n      samplingRate,\n      renderer,\n      radius,\n      activeMode,\n      modes,\n      smooth,\n      interpolation,\n      boundaries,\n    } = this.props;\n    return (\n      <Drawer\n        size={230}\n        isOpen={isOpen}\n        onClose={() => this.setState({ isOpen: false })}\n        hasBackdrop={false}\n        className=\"bp3-dark\"\n      >\n        <div\n          style={{\n            flex: 1,\n            display: \"flex\",\n            flexDirection: \"column\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            padding: 20,\n          }}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              justifyContent: \"flex-start\",\n              alignItems: \"flex-start\",\n            }}\n          >\n            <strong>Shader:</strong>\n            <div\n              className=\"bp3-select bp3-fill\"\n              style={{ marginTop: 5, marginBottom: 15 }}\n            >\n              <select>\n                <option>Mandelbrot</option>\n              </select>\n            </div>\n            <strong>Boundaries:</strong>\n            <div\n              style={{\n                marginTop: 5,\n                width: \"100%\",\n                display: \"flex\",\n                flexWrap: \"wrap\",\n                flexDirection: \"row\",\n                justifyContent: \"space-between\",\n              }}\n            >\n              {boundaries.map((boundary, index) => {\n                return (\n                  <Label style={{ flexBasis: \"45%\" }} key={index}>\n                    <NumericInput\n                      fill={true}\n                      className=\"bp3-dark\"\n                      minorStepSize={0.01}\n                      stepSize={0.01}\n                      majorStepSize={0.01}\n                      value={parseFloat(boundary.toPrecision(3))}\n                      onValueChange={(value) => {\n                        const newBoundaries = [...boundaries];\n                        newBoundaries[index] = value;\n                        store.updateState({ boundaries: newBoundaries });\n                      }}\n                    />\n                  </Label>\n                );\n              })}\n            </div>\n            <Label>\n              <strong>Iterations:</strong>\n              <NumericInput\n                className=\"bp3-dark\"\n                fill={true}\n                value={iterations}\n                onValueChange={(value) => {\n                  store.updateState({ iterations: value });\n                }}\n              />\n            </Label>\n            <Label>\n              <strong>Radius:</strong>\n              <NumericInput\n                disabled={smooth}\n                className=\"bp3-dark\"\n                fill={true}\n                minorStepSize={0.01}\n                stepSize={0.01}\n                majorStepSize={0.01}\n                value={parseFloat(radius.toPrecision(3))}\n                onValueChange={(value) => {\n                  store.updateState({ radius: value });\n                }}\n              />\n            </Label>\n            <Label>\n              <strong>Sampling Rate: </strong>\n              <span className=\"bp3-text-muted\">(NxN)</span>\n              <NumericInput\n                className=\"bp3-dark\"\n                fill={true}\n                value={samplingRate}\n                onValueChange={(value) => {\n                  store.updateState({ samplingRate: value });\n                }}\n              />\n            </Label>\n            <strong>Mode:</strong>\n            <div\n              className=\"bp3-select bp3-fill\"\n              style={{ marginTop: 5, marginBottom: 15 }}\n            >\n              <select\n                onChange={(event) => {\n                  store.updateState({ mode: event.currentTarget.value });\n                }}\n                value={activeMode}\n              >\n                {modes.map((mode, index) => {\n                  return (\n                    <option value={index} key={mode}>\n                      {mode}\n                    </option>\n                  );\n                })}\n              </select>\n            </div>\n            <strong>Extra Options:</strong>\n            <div className=\"bp3-fill\" style={{ marginTop: 5, marginBottom: 5 }}>\n              <Checkbox\n                checked={smooth}\n                onChange={() => {\n                  store.updateState({ smooth: !smooth });\n                }}\n              >\n                Smooth\n              </Checkbox>\n              <Checkbox\n                checked={interpolation}\n                onChange={() => {\n                  store.updateState({ interpolation: !interpolation });\n                }}\n              >\n                Interpolation\n              </Checkbox>\n            </div>\n            <strong>Animations:</strong>\n            <div style={{ marginTop: 5, width: \"100%\" }}>\n              <Button\n                style={{ marginBottom: 15 }}\n                icon=\"function\"\n                fill={true}\n                onClick={() => {\n                  const limit = iterations;\n                  store.updateState({ iterations: 0 });\n                  renderer.current.animateIteration(limit);\n                }}\n              >\n                Animate Iteration\n              </Button>\n              <Button\n                style={{ marginBottom: 15 }}\n                icon=\"function\"\n                fill={true}\n                disabled={smooth}\n                onClick={() => {\n                  store.updateState({ radius: 0 });\n                  renderer.current.animateRadius();\n                }}\n              >\n                Animate Radius\n              </Button>\n              <Button\n                style={{ marginBottom: 15 }}\n                icon=\"function\"\n                fill={true}\n                onClick={() => {\n                  renderer.current.animateZoom(-1);\n                }}\n              >\n                Animate Zoom In\n              </Button>\n              <Button\n                style={{ marginBottom: 15 }}\n                icon=\"function\"\n                fill={true}\n                onClick={() => {\n                  renderer.current.animateZoom(1);\n                }}\n              >\n                Animate Zoom Out\n              </Button>\n            </div>\n            <div\n              style={{\n                width: \"100%\",\n                display: \"flex\",\n                flexDirection: \"row\",\n                alignItems: \"center\",\n                justifyContent: \"space-around\",\n                padding: 5,\n                marginBottom: 15,\n              }}\n            >\n              <Button\n                icon=\"zoom-in\"\n                large={true}\n                onClick={() => {\n                  store.updateState(centerZoom(store.getState(), -1));\n                }}\n              />\n              <Button\n                icon=\"zoom-out\"\n                large={true}\n                onClick={() => {\n                  store.updateState(centerZoom(store.getState(), 1));\n                }}\n              />\n            </div>\n          </div>\n          <Button\n            icon=\"download\"\n            fill={true}\n            onClick={() => {\n              renderer.current.downloadImage();\n            }}\n          >\n            Download Image\n          </Button>\n        </div>\n      </Drawer>\n    );\n  }\n}\n\nexport default function (props: any) {\n  const { store } = props;\n  const [state, setState] = useState(store.getState());\n  useEffect(() => {\n    store.listen(() => {\n      setState(store.getState());\n    });\n  });\n  return (\n    <Settings\n      {...props}\n      store={store}\n      iterations={state.iterations}\n      samplingRate={state.samplingRate}\n      activeMode={state.mode}\n      modes={state.modes}\n      smooth={state.smooth}\n      interpolation={state.interpolation}\n      boundaries={state.boundaries}\n      radius={state.radius}\n    />\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","function createStore(initialState?: any) {\n  let width = window.innerWidth;\n  let height = (400 / 600) * width;\n\n  if (height > window.innerHeight) {\n    width = (600 / 400) * window.innerHeight;\n    height = window.innerHeight;\n  }\n  const offset = [window.innerWidth - width, window.innerHeight - height];\n\n  let state = {\n    iterations: 0,\n    samplingRate: 1,\n    radius: 2,\n    boundaries: [\n      -2 - (offset[0] / 2) * (3 / width),\n      1 + (offset[0] / 2) * (3 / width),\n      -1 - (offset[1] / 2) * (2 / height),\n      1 + (offset[1] / 2) * (2 / height),\n    ],\n    width: window.innerWidth,\n    height: window.innerHeight,\n    mode: 0,\n    modes: [\"Color\", \"Grey\", \"Black & White\"],\n    smooth: true,\n    interpolation: true,\n    ...initialState,\n  };\n\n  const listeners: Array<(state: any) => {}> = [];\n\n  function getState() {\n    return state;\n  }\n\n  function listen(listener: (state: any) => {}) {\n    listeners.push(listener);\n  }\n\n  function fire() {\n    for (let listener of listeners) {\n      listener(state);\n    }\n  }\n\n  function updateState(newState: any) {\n    if (newState) {\n      state = { ...state, ...newState };\n      fire();\n    }\n  }\n\n  return { getState, updateState, listen, fire };\n}\n\nexport default createStore;\n","import React, { useRef } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Renderer from \"./Renderer\";\nimport Settings from \"./Settings\";\nimport \"./index.css\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport createStore from \"./webgl/store\";\nconst store = createStore({\n  /*\n  boundaries: [-2, 1, -1, 1],\n  width: 600,\n  height: 400,\n  */\n});\n\nconst App = () => {\n  const renderer = useRef(null);\n\n  return (\n    <React.Fragment>\n      <Renderer store={store} ref={renderer} />\n      <Settings store={store} renderer={renderer} />\n    </React.Fragment>\n  );\n};\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}